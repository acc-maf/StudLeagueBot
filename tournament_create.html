<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div>
        <h1> Создание турнира </h1>
    </div>
    <form style="text-align: center;">
        <input type="text" placeholder="Идентификатор" id="identify">
        <input type="text" placeholder="Название" id="name">
        <input type="text" placeholder="Описание" id="desc">
        <input type="text" placeholder="Дата и время начала" id="date">
        <input type="text" placeholder="Правила (Polemica, ФСМ, МСЛ)" id="rules">
        <input type="text" placeholder="Скоринг (Polemica, ФСМ, МСЛ)" id="score">
        <select id="type-select">
            <option value="solo">Одиночный</option>
            <option value="team">Командный</option>
        </select>
        <div id="error"></div>
        <button id="create">Создать</button>
    </form>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
    <script>
        let tg = window.Telegram.WebApp;
        let create = document.getElementById("create");
        tg.expand();

        create.addEventListener("click", () => {
            let identify = document.getElementById("identify").value;
            let name = document.getElementById("name").value;
            let desc = document.getElementById("desc").value;
            let date = document.getElementById("date").value;
            let rules = document.getElementById("rules").value;
            let score = document.getElementById("score").value;
            let typ = document.getElementById("type-select").value;

            if (name.length < 5) {
                document.getElementById("error").innerText = 'Ошибка';
                return;
            }
            let data = {
                identify: identify,
                name: name,
                desc: desc,
                date: date,
                rules: rules,
                score: score,
                typ: typ
            }
            tg.sendData(JSON.stringify(data));
            tg.close();
        });
    </script>
</body>
</html>
